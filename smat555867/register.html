<html>
    <head>
        <title>Registration</title>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"> </script> 
        <link rel="stylesheet" type="text/css" href="CSS/formStyle1.css">
    </head>
    <body>
        <main>
            <div class="wrapper-main">
                <section class="section-default">
                <h1>Sign Up</h1>
                <p>Please fill in this form to create an account.</p>
                <hr>
                <form action="includes/signup.inc.php" method="POST" style="border:1px solid #ccc">
                    <label for="Role">I am a</label>
                    <select name="role" id="users">
                        <option value="">Select</option>
                        <option value="staff">Staff</option>
                        <option value="student">Student</option>
                    </select>
                    <div class="student">
                        <label for="name"><b>Full Name</b></label>
                        <input type="text" placeholder="Your Name.." name="uid" required>
                        <label for="userID"><b>User ID</b></label>
                        <input type="text" placeholder="ex. 12345" name="id" required>
                        <label for="email"><b>Email</b></label>
                        <input type="text" placeholder="Enter Email" name="mail" id= "email" required>
                        <span id="emailMsg"></span>
                        <label for="psw"><b>Password</b></label>
                        <input type="password" placeholder="Enter Password" name="pwd" id= 'pass' required>
                        <span id="passMsg"></span>
                        <label for="psw-repeat"><b>Confirm Password</b></label>
                        <input type="password" placeholder="Repeat Password" name="pwd-repeat" id="confpass" required>
                    </div>
                    <div class="staff">
                        
                        <label for="name"><b>Full Name</b></label>
                        <input type="text" placeholder="Syed Tasrif" name="uid" required>
                        <label for="userID"><b>User ID</b></label>
                        <input type="text" placeholder="12345.." name="id" required>
                        <label for="Position">Highest Academic Qualification</label>
                        <select name="academicQual">
                            <option value="Bachelors">Bachelors Degree</option>
                            <option value="Masters">Masters Degree</option>
                            <option value="PhD">PhD</option>
                            <option value="Other">Other</option>
                        </select>
                        <label for="email"><b>Email</b></label>
                        <input type="text" placeholder="Enter Email" name="mail" id= "email" required>
                        <span id="emailMsg"></span>
                        <label for="psw"><b>Password</b></label>
                        <input type="password" placeholder="Enter Password" name="pwd" id= 'pass' required>
                        <span id="passMsg"></span>
                        <label for="psw-repeat"><b>Confirm Password</b></label>
                        <input type="password" placeholder="Repeat Password" name="pwd-repeat" id="confpass" required>
                    </div>
                    <div class="clearfix">
                        <button type="button" class="cancelbtn">Cancel</button>
                        <button type="submit" class="signup-submit" name="signup-submit">Sign Up</button>
                    </div>

                </form>
                </section>
            </div>
        </main>
        <script>
            $(document).ready(function() {
                $('.signupbtn').click(function(event){
                    data = $('#pass').val();
                    inp=$("#confpass").val();
                    var length=inp.length;
                    var len = data.length;
                    if(len < 1) {
                        alert("Password cannot be blank");
                        // Prevent form submission
                        event.preventDefault();
                    }
                    if(length<1){
                        alert("Please Confirm Your Password");
                        // Prevent form submission
                        event.preventDefault();
                    }
                    else if(data!=inp) {
                        alert("Password and Confirm Password don't match");
                        // Prevent form submission
                        event.preventDefault();
                    }
                });
            });
            $(document).ready(function(){
                // set initially button state hidden
                //$('.signupbtn').hide();
                // use keyup event on email field
                $("#email").keyup(function(){
                    if(validateEmail()){
                        // if the email is validated
                        // set input email border green
                        $("#email").css("border","2px solid green");
                        // and set label 
                        $("#emailMsg").html("<p class='text-success'>Validated</p>");
                    }
                    else{
                        // if the email is not validated
                        // set border red
                        $("#email").css("border","2px solid red");
                        $("#emailMsg").html("<p class='text-danger'>Un-validated</p>");
                    }
                    buttonState();
                });
                // use keyup event on password
                $("#pass").keyup(function(){
                    // check
                    if(validatePassword()){
                        // set input password border green
                        $("#pass").css("border","2px solid green");
                        //set passMsg 
                        $("#passMsg").html("<p class='text-success'>Password validated</p>");
                    }else{
                        // set input password border red
                        $("#pass").css("border","2px solid red");
                        //set passMsg 
                        $("#passMsg").html("<p class='text-danger'>Password not valid</p>");
                    }

                });
            });

            function validateEmail(){
                // get value of input email
                var email=$("#email").val();
                // use reular expression
                var reg = /^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/
                if(reg.test(email)){
                    return true;
                }else{
                    return false;
                }

            }
            function validatePassword(){
                //get input password value
                var pass=$("#pass").val();
                // check it s length
                if(pass.length < 6){
                    return false;            
                }
                else if(pass.search(/[0-9]/)==-1){
                    return false;
                }
                else if(pass.search(/[a-z]/)==-1){
                    return false;
                }
                else if(pass.search(/[A-Z]/)==-1){
                    return false;
                }
                else if(pass.search(/[!\@\#\$\%\^]/)==-1){
                    return false;
                }        
                else{
                    return true;
                }
            }  
            $(document).ready(function(){   //showing or hiding option based on selection
                $("#users").change(function(){
                    $(this).find("option:selected").each(function(){
                        var optionValue = $(this).attr("value");
                        if(optionValue){
                            $(".student").not("." + optionValue).hide();
                            $("." + optionValue).show();
                        }
                        else{
                            $(".student").hide();
                        }
                    });
                }).change();
            });  

            $(document).ready(function(){
                $("#users").change(function(){
                    $(this).find("option:selected").each(function(){
                        var optionValue = $(this).attr("value");
                        if(optionValue){
                            $(".staff").not("." + optionValue).hide();
                            $("." + optionValue).show();
                        }
                        else{
                            $(".staff").hide();
                        }
                    });
                }).change();
            });
        </script>

    </body>
</html>